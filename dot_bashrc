#
# ~/.bashrc
#

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# Aliases
# Default Linux Commands
alias ls='ls --color=auto'
alias grep='grep --color=auto'
alias l='ls -lh'    # Human-readable long listing format
alias la='ls -lah'  # Same as 'l' above but display hidden files
alias len='less -N' # 'less' with number lines
# eza: All of the aliases display icons automatically and display entries as hyperlinks, making them clickable.
# Long views show the Git status for files and directories and a custom time style (mm-dd-yy hh:mm) (24-hour clock).
# Display extended details, group owner, and number of hard links
alias e='eza --icons=auto --hyperlink -lgH --git --git-repos --time-style='\''+%m-%d-%y %H:%M'\'''
# Display extended details, group owner, number of hard links, and hidden (dot) files
alias ea='eza --icons=auto --hyperlink -a -lgH --git --git-repos --time-style='\''+%m-%d-%y %H:%M'\'''
# Display entries as a grid
alias eg='eza --icons=auto --hyperlink'
# Display entries as a grid and hidden (dot) files
alias ega='eza --icons=auto --hyperlink -a'
# bat
alias b='bat'
# Git
alias glg='git lg' # 'lg' is a heavily customized 'log' alias in a '.gitconfig' file
alias gst='git status'
alias ga='git add .'                     # Add all changes to the commit
alias gr='git remote'                    # List remote repositories
alias gb='git branch'                    # List branches
alias grts='git restore --staged .'      # Unstage all staged files
alias gm='git commit -m'                 # Add a commit with a message
alias gma='git commit --amend --no-edit' # Update the most recent commit without changing the commit message
alias gp='git push'                      # Push to remote
# Downloading and Archiving
alias ytd='yt-dlp --cookies-from-browser firefox'
alias ytd-dt='yt-dlp --cookies-from-browser firefox --write-description --write-thumbnail'
alias gld='gallery-dl -D . --cookies-from-browser firefox' # Download to the current directory
# kitty: Install kitty (if not installed), otherwise update kitty to the latest version.
alias kup='curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin'
# Other
alias ff='fastfetch'

PS1='[\u@\h \W]\$ '

# Environment variables
export EDITOR="nvim"
export PATH="${PATH}:~/scripts"
export PATH="${PATH}:~/.local/bin"

# Yazi shell wrapper to change the cwd when exiting yazi (use yy instead of yazi to start)
function yy() {
    local tmp="$(mktemp -t "yazi-cwd.XXXXXX")"
    yazi "$@" --cwd-file="$tmp"
    if cwd="$(cat -- "$tmp")" && [ -n "$cwd" ] && [ "$cwd" != "$PWD" ]; then
        cd -- "$cwd"
    fi
    rm -f -- "$tmp"
}

# Git
# Add all changes to a commit and add a commit with a message
# Usage: gam "commit message"
# NOTE: REQUIRES the following Git aliases that are defined above - 'ga' and 'gm'
gam() {
    ga && gm "$1"
}
# Add all changes to a commit, add a commit with a message, and push to remote
# Usage: gamp "commit message"
# NOTE: REQUIRES the following Git aliases that are defined above - 'ga', 'gm', and 'gp'
gamp() {
    gam "$@" && gp
}
# Add all changes to a commit and update the most recent commit without changing its message
# Usage: gama
# NOTE: REQUIRES the following Git aliases that are defined above - 'ga' and 'gma'
gama() {
    ga && gma
}
# Add all changes to a commit, update the most recent commit without changing its message, and push to remote
# Usage: gamap
# NOTE: REQUIRES the following Git aliases that are defined above - 'ga', 'gma', and 'gp'
gamap() {
    gama && gp
}

# base64
# Decode base64 data and output the result to the terminal
# Usage: b64 base64string
b64() {
    base64 -d <<<"$1" && echo
}

# base32
# Decode base32 data and output the result to the terminal
# Usage: b32 base32string
b32() {
    base32 -d <<<"$1" && echo
}

# Allow zoxide usage (KEEP AT THE END OF THIS CONFIG FILE)
eval "$(zoxide init bash)"
# Allow starship usage (KEEP AT THE END OF THIS CONFIG FILE)
eval "$(starship init bash)"
